name: Auto GitHub Contributions

on:
  schedule:
    # Contoh: commit setiap 6 jam (4 kali sehari)
    - cron: '0 */6 * * *' # jam 00, 06, 12, 18 UTC
  workflow_dispatch:

jobs:
  contribute:
    runs-on: ubuntu-latest
    environment: production

    steps:
      - uses: actions/checkout@v3
        with:
          token: ${{ secrets.BOT_TOKEN }}

      - name: Set git identity
        run: |
          git config user.name "thiskey"
          git config user.email "this.key@devnova.icu"

      - name: Create dummy commit
        run: |
          # Loop untuk 3 commit sekaligus supaya lebih “full”
          for i in {1..3}; do
            DATE=$(date '+%Y-%m-%d %H:%M:%S')
            echo "Update $DATE $i" >> dummy.txt
            git add dummy.txt
            git commit -m "Auto contribution $DATE $i" || echo "No changes"
            sleep 2 # jeda kecil supaya commit hash berbeda
          done
          git push origin main
